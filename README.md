# Assignment: Golang Product Versioning/Revisions

---

#### In this project, I used Hexagonal + Domain Driven Design (DDD) architecture.

In this application, I used Golang [Fiber](https://docs.gofiber.io/) framework as my REST framework. Mongdb for my persistence layer. RabbitMQ to handle events for saving product revisions. Also used Redis for handling revision numbers because I did not want to query to database each time I wanted to save a revision.

#### system's architecture:
``/cmd``: in this folder you can find main file of the application which holds all the requirements for application.

``/config``: contains a json file which has application configurations.

``/docs``: this folder is generated by swagger tool.(I used [swag](https://github.com/swaggo/swag) package)

``/internal``: this is the main folder of my app. All the business logics, handlers, publisher, consumers, etc. live in here.
    
``/internal/app``: this folder contains adapters. Routes and their handler and of course consumers exists in this folder. Also this folder has a service folder which contains all application services. Application services acts like aggregator. They call different domain services and orchestrate all parts of the logic.

``/domain``: this folder holds domains and their business logic implementations. Each domain has a repository which is an interface and somehow an abstraction layer for their implementations in the ``/repository``. Domain service use cases are in this folder and they are abstraction for application layer.

``/infrastructure``: this folder is where I implemented infrastructure of my app like databases and message queues.

``/repository``: this folder contains repository implementations. This is where my app use infrastructure to handle its logic. Database queries, dispatching events, and these kind of operations happen in there.

``/pkg``: this folder contains that part of code that can be shared across all the application and also other applications.

``/utils``: utility functions live in there.

#### APIs:
Our APIs are divided in to two parts: Product and Product Revision.

``POST /api/v1/product``: this route creates a product and returns its info.

``GET /api/v1/product``: returns a product details by its id.

``PUT /api/v1/product/:id``: updates details of a product by id.

``GET /api/v1/product/:id/revision/:revisionId``: returns a product details by its id and a specific revision.

``GET /api/v1/product-revision/{productId}``: returns all revisions of a product.

#### setup instructions:
There is a docker compose file in the application and you can easily run following command and run application:

``docker-compose up``